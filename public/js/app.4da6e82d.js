(function(){"use strict";var a={3190:function(a,t,n){var e=n(9242),l=n(3396);function i(a,t,n,e,i,o){const s=(0,l.up)("AdminLayout");return(0,l.wg)(),(0,l.j4)(s)}const o={class:"main"},s={class:"header"},r={class:"body"};function d(a,t,n,e,i,d){const c=(0,l.up)("AdminHeaderBar"),u=(0,l.up)("router-view");return(0,l.wg)(),(0,l.iD)("div",o,[(0,l._)("div",s,[(0,l.Wm)(c)]),(0,l._)("div",r,[(0,l.Wm)(u)])])}const c=a=>((0,l.dD)("data-v-4d744755"),a=a(),(0,l.Cn)(),a),u={class:"header-bar"},p=c((()=>(0,l._)("h1",{class:"brand"},"ISUPORTS",-1))),m=c((()=>(0,l._)("h2",{class:"subtitle"},"Admin Panel",-1))),_=[p,m];function h(a,t){return(0,l.wg)(),(0,l.iD)("div",u,_)}var y=n(89);const g={},v=(0,y.Z)(g,[["render",h],["__scopeId","data-v-4d744755"]]);var w=v,f=(0,l.aZ)({name:"AdminLayout",components:{AdminHeaderBar:w}});const b=(0,y.Z)(f,[["render",d],["__scopeId","data-v-766f8deb"]]);var k=b,D=(0,l.aZ)({name:"AdminApp",components:{AdminLayout:k}});const L=(0,y.Z)(D,[["render",i]]);var z=L;function H(a,t,n,e,i,o){const s=(0,l.up)("TenantLayout");return(0,l.wg)(),(0,l.j4)(s)}const C={class:"main"},Z={class:"header"},I={class:"body"};function A(a,t,n,e,i,o){const s=(0,l.up)("TenantHeaderBar"),r=(0,l.up)("router-view");return(0,l.wg)(),(0,l.iD)("div",C,[(0,l._)("div",Z,[(0,l.Wm)(s,{"tenant-name":a.tenantDisplayName,"is-logged-in":a.isLoggedIn},null,8,["tenant-name","is-logged-in"])]),(0,l._)("div",I,[(0,l.Wm)(r)])])}var T=n(7139);const S=a=>((0,l.dD)("data-v-60bcdc01"),a=a(),(0,l.Cn)(),a),U={class:"header-bar"},O=S((()=>(0,l._)("h1",{class:"brand"},"ISUPORTS",-1))),M={class:"subtitle"},x={class:"switch-role"};function P(a,t,n,e,i,o){return(0,l.wg)(),(0,l.iD)("div",U,[O,(0,l._)("h2",M,(0,T.zw)(a.tenantName),1),(0,l._)("div",x,[(0,l._)("button",{type:"button",onClick:t[0]||(t[0]=(...t)=>a.handleAssumeOrganizerRole&&a.handleAssumeOrganizerRole(...t))},"主催者モードに切り替える"),(0,l._)("button",{type:"button",onClick:t[1]||(t[1]=(...t)=>a.handleLogout&&a.handleLogout(...t))},"ログアウト")])])}var R=n(678),B=n(6265),N=n.n(B),j=(0,l.aZ)({name:"TenantHeaderBar",props:{tenantName:{type:String,default:"鎌倉ISUPORTS同好会"}},setup(){const a=(0,R.tv)(),t=async()=>{try{await N().post("/auth/login/organizer");a.push("/organizer/")}catch(t){window.alert("failed to assume organizer role")}},n=async()=>{try{await N().post("/auth/logout");a.push("/")}catch(t){window.alert("failed to logout")}};return{handleAssumeOrganizerRole:t,handleLogout:n}}});const F=(0,y.Z)(j,[["render",P],["__scopeId","data-v-60bcdc01"]]);var W=F,q=n(4870);const K=()=>{const a=(0,q.iH)(!1),t=(0,q.iH)(""),n=async()=>{const n=await N().get("/api/me"),e=n.data;a.value=e.data.loggedIn,t.value=e.data.tenant.display_name};(0,l.bv)((()=>{n()}));const e=()=>{n()};return{tenantDisplayName:t,isLoggedIn:a,refetch:e}};var Y=(0,l.aZ)({name:"TenantLayout",components:{TenantHeaderBar:W},setup(){const{isLoggedIn:a,tenantDisplayName:t}=K();return{tenantDisplayName:t,isLoggedIn:a}}});const V=(0,y.Z)(Y,[["render",A],["__scopeId","data-v-2a804efb"]]);var $=V,E=(0,l.aZ)({name:"TenantApp",components:{TenantLayout:$}});const G=(0,y.Z)(E,[["render",H]]);var J=G;const Q=a=>((0,l.dD)("data-v-5dbf67ca"),a=a(),(0,l.Cn)(),a),X={class:"lp"},aa=Q((()=>(0,l._)("h2",null,"管理画面へのログイン",-1))),ta=Q((()=>(0,l._)("label",{for:"account"}," アカウント ",-1))),na=Q((()=>(0,l._)("input",{type:"submit",value:"認証する"},null,-1)));function ea(a,t,n,i,o,s){return(0,l.wg)(),(0,l.iD)("div",X,[aa,(0,l._)("form",{onSubmit:t[1]||(t[1]=(0,e.iM)(((...t)=>a.handleSubmit&&a.handleSubmit(...t)),["prevent"]))},[ta,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>a.account=t),type:"text",name:"account",id:"account",placeholder:"admin"},null,512),[[e.nr,a.account]]),na],32)])}var la=(0,l.aZ)({setup(){const a=(0,R.tv)(),t=(0,q.iH)(""),n=async()=>{try{const n=await N().post("/auth/login/admin",new URLSearchParams({id:t.value}));if(200!=n.status)return void window.alert("Failed to Login: status="+n.status);a.push("/admin/")}catch(n){window.alert("Failed to Login: "+n)}};return{account:t,handleSubmit:n}}});const ia=(0,y.Z)(la,[["render",ea],["__scopeId","data-v-5dbf67ca"]]);var oa=ia;const sa=a=>((0,l.dD)("data-v-527cc728"),a=a(),(0,l.Cn)(),a),ra={class:"admin"},da=sa((()=>(0,l._)("h2",null,"テナント一覧",-1))),ca={class:"tenant-list"},ua=sa((()=>(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",{class:"tenant-id"},"ID"),(0,l._)("th",{class:"tenant-name"},"テナント名"),(0,l._)("th",{class:"tenant-display-name"},"表示名"),(0,l._)("th",{class:"billing"},"請求額")])],-1))),pa={class:"tenant-id"},ma={class:"tenant-name"},_a=["href"],ha={class:"tenant-display-name"},ya={class:"billing"},ga={key:0},va={colspan:"4",class:"loading"},wa=(0,l.Uk)(" 読み込み中... "),fa=sa((()=>(0,l._)("span",{class:"cycle-loop"},"の",-1)));function ba(a,t,n,i,o,s){const r=(0,l.up)("AddTenantModal");return(0,l.wg)(),(0,l.iD)("div",ra,[(0,l._)("button",{class:"add-tenant",onClick:t[0]||(t[0]=(...t)=>a.handleAddTenant&&a.handleAddTenant(...t))}," テナント追加 "),(0,l.wy)((0,l.Wm)(r,{onClose:a.handleAddTenantClose,onTenantAdded:a.handleTenantAdded},null,8,["onClose","onTenantAdded"]),[[e.F8,a.showModal]]),da,(0,l._)("table",ca,[ua,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.tenants,(a=>((0,l.wg)(),(0,l.iD)("tr",{key:a.id},[(0,l._)("td",pa,(0,T.zw)(a.id),1),(0,l._)("td",ma,[(0,l.Uk)((0,T.zw)(a.name)+" ",1),(0,l._)("a",{href:`https://${a.name}.t.isucon.dev/`},"→",8,_a)]),(0,l._)("td",ha,(0,T.zw)(a.display_name),1),(0,l._)("td",ya,(0,T.zw)(a.billing.toLocaleString())+"円",1)])))),128)),a.noMoreLoad?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("tr",ga,[(0,l._)("td",va,[a.isLoading?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[wa,fa],64)):((0,l.wg)(),(0,l.iD)("button",{key:1,onClick:t[1]||(t[1]=(...t)=>a.handleLoading&&a.handleLoading(...t))},"さらに読み込む"))])]))])])])}const ka=a=>((0,l.dD)("data-v-48191a96"),a=a(),(0,l.Cn)(),a),Da=ka((()=>(0,l._)("h3",null,"新規テナント追加",-1))),La=ka((()=>(0,l._)("label",null,"テナント名(サブドメイン)",-1))),za=ka((()=>(0,l._)("label",null,"テナント表示名",-1)));function Ha(a,t,n,i,o,s){const r=(0,l.up)("ModalBase");return(0,l.wg)(),(0,l.j4)(r,{applyText:"作成","cancel-text":"キャンセル",onApply:a.handleApply},{default:(0,l.w5)((()=>[Da,(0,l._)("form",null,[La,(0,l.wy)((0,l._)("input",{type:"text",name:"tenant_name","onUpdate:modelValue":t[0]||(t[0]=t=>a.tenantName=t)},null,512),[[e.nr,a.tenantName]]),za,(0,l.wy)((0,l._)("input",{type:"text",name:"tenant_display_name","onUpdate:modelValue":t[1]||(t[1]=t=>a.tenantDisplayName=t)},null,512),[[e.nr,a.tenantDisplayName]])])])),_:1},8,["onApply"])}const Ca={class:"action"};function Za(a,t,n,i,o,s){return(0,l.wg)(),(0,l.iD)("div",{class:"modal-outer",onClick:t[3]||(t[3]=(...t)=>a.handleOuterClick&&a.handleOuterClick(...t))},[(0,l._)("div",{class:"modal-inner",onClick:t[2]||(t[2]=(0,e.iM)(((...t)=>a.handleInnerClick&&a.handleInnerClick(...t)),["stop"]))},[(0,l.WI)(a.$slots,"default",{},void 0,!0),(0,l._)("div",Ca,[a.cancelText?((0,l.wg)(),(0,l.iD)("button",{key:0,class:"cancel",onClick:t[0]||(t[0]=(...t)=>a.handleCancel&&a.handleCancel(...t))},(0,T.zw)(a.cancelText),1)):(0,l.kq)("",!0),a.applyText?((0,l.wg)(),(0,l.iD)("button",{key:1,class:"apply",onClick:t[1]||(t[1]=(...t)=>a.handleApply&&a.handleApply(...t))},(0,T.zw)(a.applyText),1)):(0,l.kq)("",!0)])])])}var Ia=(0,l.aZ)({name:"ModalBase",props:{applyText:{type:String,default:"OK"},cancelText:{type:String,default:"Cancel"},show:{type:Boolean,default:!1}},emit:["close","apply"],setup(a,t){const n=()=>{t.emit("close")},e=()=>{},l=()=>{t.emit("close")},i=()=>{t.emit("apply"),t.emit("close")};return{handleOuterClick:n,handleInnerClick:e,handleApply:i,handleCancel:l}}});const Aa=(0,y.Z)(Ia,[["render",Za],["__scopeId","data-v-80e707e8"]]);var Ta=Aa,Sa=(0,l.aZ)({name:"AddTenantModal",components:{ModalBase:Ta},emits:["tenantAdded"],setup(a,t){const n=(0,q.iH)(""),e=(0,q.iH)(""),l=async()=>{const a=await N().post("/api/admin/tenants/add",new URLSearchParams({name:n.value,display_name:e.value}));a.data.status&&t.emit("tenantAdded",{id:"x",name:a.data.data.tenant.name,display_name:a.data.data.tenant.display_name,billing:0})};return{tenantName:n,tenantDisplayName:e,handleApply:l}}});const Ua=(0,y.Z)(Sa,[["render",Ha],["__scopeId","data-v-48191a96"]]);var Oa=Ua,Ma=(0,l.aZ)({components:{AddTenantModal:Oa},setup(){const a=(0,q.iH)([]),t=(0,q.iH)(""),n=(0,q.iH)(!1),e=(0,q.iH)(!1),i=async l=>{const i=new URLSearchParams;l&&i.append("before",l),n.value=!0;try{const l=await N().get("/api/admin/tenants/billing",{params:i}),o=l.data;if(!o.status)return void window.alert("Failed to fetch tenant list: status=false");if(!o.data.tenants.length)return void(e.value=!0);a.value.push(...o.data.tenants),t.value=o.data.tenants[o.data.tenants.length-1].id,o.data.tenants.length<20&&(e.value=!0)}catch(o){window.alert("Failed to fetch tenants list")}finally{n.value=!1}};(0,l.bv)((()=>{i("")}));const o=()=>{i(t.value)},s=(0,q.iH)(!1),r=()=>{s.value=!0},d=()=>{s.value=!1},c=t=>{a.value.unshift(t)};return{tenants:a,handleLoading:o,isLoading:n,noMoreLoad:e,showModal:s,handleAddTenant:r,handleAddTenantClose:d,handleTenantAdded:c}}});const xa=(0,y.Z)(Ma,[["render",ba],["__scopeId","data-v-527cc728"]]);var Pa=xa;const Ra=[{path:"/",name:"home",component:oa},{path:"/admin/",name:"admin",component:Pa},{path:"/:catchall(.*)",name:"notfound",redirect:"/"}],Ba=(0,R.p7)({history:(0,R.PO)("/"),routes:Ra});var Na=Ba;const ja=a=>((0,l.dD)("data-v-d04fded8"),a=a(),(0,l.Cn)(),a),Fa={class:"lp"},Wa={class:"box"},qa=ja((()=>(0,l._)("h2",null,"プレイヤーサイトへログイン",-1))),Ka=ja((()=>(0,l._)("label",{for:"account"}," アカウントID ",-1))),Ya=ja((()=>(0,l._)("input",{type:"submit",value:"認証する"},null,-1)));function Va(a,t,n,i,o,s){return(0,l.wg)(),(0,l.iD)("div",Fa,[(0,l._)("div",Wa,[qa,(0,l._)("form",{onSubmit:t[1]||(t[1]=(0,e.iM)(((...t)=>a.handleSubmit&&a.handleSubmit(...t)),["prevent"]))},[Ka,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":t[0]||(t[0]=t=>a.account=t),type:"text",name:"account",id:"account",placeholder:"2147483647"},null,512),[[e.nr,a.account]]),Ya],32)])])}var $a=(0,l.aZ)({setup(){const a=(0,R.tv)(),t=(0,q.iH)(""),n=async()=>{try{const n=await N().post("/auth/login/player",new URLSearchParams({id:t.value}));if(200!=n.status)return void window.alert("Failed to Login: status="+n.status);a.push("/mypage")}catch(n){window.alert("Failed to Login: "+n)}};return{account:t,handleSubmit:n}}});const Ea=(0,y.Z)($a,[["render",Va],["__scopeId","data-v-d04fded8"]]);var Ga=Ea;const Ja=a=>((0,l.dD)("data-v-25da9aff"),a=a(),(0,l.Cn)(),a),Qa={class:"mypage"},Xa=Ja((()=>(0,l._)("h2",null," 大会一覧 ",-1))),at={class:"competition-list"},tt=Ja((()=>(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",{class:"competition-id"},"大会ID"),(0,l._)("th",{class:"competition-name"},"大会名"),(0,l._)("th",{class:"competition-display-name"},"完了ステータス")])],-1))),nt={class:"competition-id"},et={class:"competition-title"},lt=(0,l.Uk)("→"),it={class:"finish-status"};function ot(a,t,n,e,i,o){const s=(0,l.up)("router-link");return(0,l.wg)(),(0,l.iD)("div",Qa,[Xa,(0,l._)("table",at,[tt,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.competitions,(a=>((0,l.wg)(),(0,l.iD)("tr",{key:a.id},[(0,l._)("td",nt,(0,T.zw)(a.id),1),(0,l._)("td",et,[(0,l.Uk)((0,T.zw)(a.title)+" ",1),(0,l.Wm)(s,{to:`/competition/${a.id}`},{default:(0,l.w5)((()=>[lt])),_:2},1032,["to"])]),(0,l._)("td",it,(0,T.zw)(a.is_finished?"大会完了":"開催中"),1)])))),128))])])])}var st=(0,l.aZ)({name:"MyPageView",setup(){const a=(0,q.iH)([]),t=async()=>{const t=await N().get("/api/player/competitions");t.data.status?(console.log(t.data),a.value=t.data.data.competitions):window.alert("failed to fetch competitions: status=false")};(0,l.bv)((()=>{t()}));const n=()=>{},e=(0,q.iH)(!1),i=(0,q.iH)(!1);return{competitions:a,isLoading:e,noMoreLoad:i,handleLoading:n}}});const rt=(0,y.Z)(st,[["render",ot],["__scopeId","data-v-25da9aff"]]);var dt=rt;const ct=a=>((0,l.dD)("data-v-3256c85f"),a=a(),(0,l.Cn)(),a),ut={class:"competition"},pt=ct((()=>(0,l._)("h2",null," 大会情報 ",-1))),mt=ct((()=>(0,l._)("h3",null,"スコアランキング",-1))),_t={class:"ranking"},ht=ct((()=>(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",{class:"rank-number"},"順位"),(0,l._)("th",{class:"player-id"},"プレイヤーID"),(0,l._)("th",{class:"player-display-name"},"プレイヤー名"),(0,l._)("th",{class:"rank-score"},"スコア")])],-1))),yt={class:"rank-number"},gt={class:"player-id"},vt=(0,l.Uk)("→"),wt={class:"player-display-name"},ft={class:"rank-score"},bt={key:0},kt={colspan:"4",class:"loading"},Dt=(0,l.Uk)(" 読み込み中... "),Lt=ct((()=>(0,l._)("span",{class:"cycle-loop"},"め",-1)));function zt(a,t,n,e,i,o){const s=(0,l.up)("router-link");return(0,l.wg)(),(0,l.iD)("div",ut,[pt,mt,(0,l._)("table",_t,[ht,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.ranks,(a=>((0,l.wg)(),(0,l.iD)("tr",{key:a.rank},[(0,l._)("td",yt,(0,T.zw)(a.rank),1),(0,l._)("td",gt,[(0,l.Uk)((0,T.zw)(a.player_id)+" ",1),(0,l.Wm)(s,{to:`/player/${a.player_id}`},{default:(0,l.w5)((()=>[vt])),_:2},1032,["to"])]),(0,l._)("td",wt,(0,T.zw)(a.player_display_name),1),(0,l._)("td",ft,(0,T.zw)(a.score),1)])))),128)),a.noMoreLoad?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("tr",bt,[(0,l._)("td",kt,[a.isLoading?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[Dt,Lt],64)):((0,l.wg)(),(0,l.iD)("button",{key:1,onClick:t[0]||(t[0]=(...t)=>a.handleLoading&&a.handleLoading(...t))},"さらに読み込む"))])]))])])])}const Ht=a=>{const{api:t,payloadPath:n,pagerParam:e,pagerKey:l,limit:i}=a;let o="";const s=(0,q.iH)(!1),r=(0,q.iH)(!1),d=async()=>{const a=new URLSearchParams;o&&a.append(e,o),r.value=!0;try{const e=await N().get(t,{params:a}),d=e.data;if(!d.status)return window.alert("Failed to fetch: status=false"),[];const c=d.data[n];if(!c.length)return s.value=!0,[];const u=c[c.length-1];return o=u[l],c.length<i&&(s.value=!0),c}catch(d){window.alert("Failed to fetch: err="+d)}finally{r.value=!1}return[]};return{fetch:d,noMoreLoad:s,isLoading:r}};var Ct=(0,l.aZ)({setup(){const a=(0,R.yj)(),t=a.params.competition_id,n=(0,q.iH)([]),{fetch:e,isLoading:i,noMoreLoad:o}=Ht({api:`/api/player/competition/${t}/ranking`,payloadPath:"ranks",pagerParam:"rank_after",pagerKey:"rank",limit:100}),s=async()=>{const a=await e();a.length&&n.value.push(...a)};(0,l.bv)((()=>{s()}));const r=()=>{s()};return{ranks:n,isLoading:i,noMoreLoad:o,handleLoading:r}}});const Zt=(0,y.Z)(Ct,[["render",zt],["__scopeId","data-v-3256c85f"]]);var It=Zt;const At={class:"single-player"},Tt=(0,l._)("h2",null,"プレイヤー情報",-1),St=(0,l._)("h3",null,"登録されたスコア",-1),Ut=(0,l._)("p",null,"TBD...",-1);function Ot(a,t,n,e,i,o){return(0,l.wg)(),(0,l.iD)("div",At,[Tt,a.player?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[(0,l._)("ul",null,[(0,l._)("li",null,"プレイヤーID: "+(0,T.zw)(a.player.id),1),(0,l._)("li",null,"プレイヤー名: "+(0,T.zw)(a.player.display_name),1),(0,l._)("li",null,"参加資格情報: "+(0,T.zw)(a.player.is_disqualified?"失格":"有効"),1)]),St,Ut],64)):(0,l.kq)("",!0)])}var Mt=(0,l.aZ)({setup(){const a=(0,R.yj)(),t=a.params.player_id,n=(0,q.iH)(),e=(0,q.iH)([]),i=async()=>{const a=await N().get(`/api/player/player/${t}`);console.log(a.data),n.value=a.data.data.player,e.value=a.data.data.scores};return(0,l.bv)((()=>{i()})),{player:n,scores:e}}});const xt=(0,y.Z)(Mt,[["render",Ot]]);var Pt=xt;const Rt={class:"organizer"},Bt=(0,l.Uk)(" Organizer向けのメニュー画面だよ "),Nt=(0,l.Uk)("プレイヤー一覧"),jt=(0,l.Uk)("大会一覧"),Ft=(0,l.Uk)("請求情報");function Wt(a,t,n,e,i,o){const s=(0,l.up)("router-link");return(0,l.wg)(),(0,l.iD)("div",Rt,[Bt,(0,l._)("ul",null,[(0,l._)("li",null,[(0,l.Wm)(s,{to:"/organizer/players"},{default:(0,l.w5)((()=>[Nt])),_:1})]),(0,l._)("li",null,[(0,l.Wm)(s,{to:"/organizer/competitions"},{default:(0,l.w5)((()=>[jt])),_:1})]),(0,l._)("li",null,[(0,l.Wm)(s,{to:"/organizer/billing"},{default:(0,l.w5)((()=>[Ft])),_:1})])])])}var qt=(0,l.aZ)({setup(){return{}}});const Kt=(0,y.Z)(qt,[["render",Wt]]);var Yt=Kt;const Vt=a=>((0,l.dD)("data-v-97924a80"),a=a(),(0,l.Cn)(),a),$t={class:"players"},Et=Vt((()=>(0,l._)("h2",null," プレイヤー一覧 ",-1))),Gt={class:"player-list"},Jt=Vt((()=>(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",{class:"player-id"},"プレイヤーID"),(0,l._)("th",{class:"player-name"},"プレイヤー名"),(0,l._)("th",{class:"player-is-disqualified"},"参加資格"),(0,l._)("th",{class:"action"})])],-1))),Qt={class:"player-id"},Xt={class:"player-name"},an={class:"player-is-disqualified"},tn=Vt((()=>(0,l._)("td",{class:"action"}," 失格にするボタン ",-1)));function nn(a,t,n,e,i,o){return(0,l.wg)(),(0,l.iD)("div",$t,[Et,(0,l._)("table",Gt,[Jt,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.players,(a=>((0,l.wg)(),(0,l.iD)("tr",{key:a.id},[(0,l._)("td",Qt,(0,T.zw)(a.id),1),(0,l._)("td",Xt,(0,T.zw)(a.display_name),1),(0,l._)("td",an,(0,T.zw)(a.is_disqualified?"失格":""),1),tn])))),128))])])])}var en=(0,l.aZ)({setup(){const a=(0,q.iH)([]),t=async()=>{const t=await N().get("/api/organizer/players");t.data.status?(console.log(t.data),a.value=t.data.data.players):window.alert("failed to fetch players: status=false")};return(0,l.bv)((()=>{t()})),{players:a}}});const ln=(0,y.Z)(en,[["render",nn],["__scopeId","data-v-97924a80"]]);var on=ln;const sn=a=>((0,l.dD)("data-v-27864ee6"),a=a(),(0,l.Cn)(),a),rn={class:"organizer-competition-list"},dn=sn((()=>(0,l._)("h2",null," 大会一覧 ",-1))),cn={class:"competition-list"},un=sn((()=>(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",{class:"competition-id"},"大会ID"),(0,l._)("th",{class:"competition-name"},"大会名"),(0,l._)("th",{class:"competition-display-name"},"完了ステータス")])],-1))),pn={class:"competition-id"},mn={class:"competition-title"},_n={class:"finish-status"};function hn(a,t,n,e,i,o){return(0,l.wg)(),(0,l.iD)("div",rn,[dn,(0,l._)("table",cn,[un,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.competitions,(a=>((0,l.wg)(),(0,l.iD)("tr",{key:a.id},[(0,l._)("td",pn,(0,T.zw)(a.id),1),(0,l._)("td",mn,(0,T.zw)(a.title),1),(0,l._)("td",_n,(0,T.zw)(a.is_finished?"大会完了":"開催中"),1)])))),128))])])])}var yn=(0,l.aZ)({name:"CompetitionListView",setup(){const a=(0,q.iH)([]),t=async()=>{const t=await N().get("/api/player/competitions");t.data.status?(console.log(t.data),a.value=t.data.data.competitions):window.alert("failed to fetch competitions: status=false")};(0,l.bv)((()=>{t()}));const n=()=>{},e=(0,q.iH)(!1),i=(0,q.iH)(!1);return{competitions:a,isLoading:e,noMoreLoad:i,handleLoading:n}}});const gn=(0,y.Z)(yn,[["render",hn],["__scopeId","data-v-27864ee6"]]);var vn=gn;const wn=a=>((0,l.dD)("data-v-a7792cde"),a=a(),(0,l.Cn)(),a),fn={class:"tenant-billing"},bn=wn((()=>(0,l._)("h2",null," 請求情報 ",-1))),kn=(0,l.Uk)("請求額: "),Dn={class:"total-billing"},Ln=(0,l.Uk)(" になりま～す"),zn=wn((()=>(0,l._)("h3",null,"大会ごとの請求明細",-1))),Hn=wn((()=>(0,l._)("p",null,"大会閲覧者数とは、スコア登録をしたプレイヤー以外で大会情報を閲覧した人です。大会ごとの請求額は、スコアを登録した人1人あたり100円、大会閲覧のみした人1人あたり10円で、合計金額が請求額となります。",-1))),Cn={class:"billing-list"},Zn=wn((()=>(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",{class:"competition-id"},"大会ID"),(0,l._)("th",{class:"competition-title"},"大会名"),(0,l._)("th",{class:"player-count"},"スコア登録人数"),(0,l._)("th",{class:"visitor-count"},"大会閲覧者数"),(0,l._)("th",{class:"billing-yen"},"請求額")])],-1))),In={class:"competition-id"},An={class:"competition-title"},Tn={class:"player-count"},Sn={class:"supplement"},Un={class:"visitor-count"},On={class:"supplement"},Mn={class:"billing-yen"};function xn(a,t,n,e,i,o){return(0,l.wg)(),(0,l.iD)("div",fn,[bn,(0,l._)("p",null,[kn,(0,l._)("span",Dn,(0,T.zw)(a.totalBilling.toLocaleString())+"円",1),Ln]),zn,Hn,(0,l._)("table",Cn,[Zn,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.billingReports,(a=>((0,l.wg)(),(0,l.iD)("tr",{key:a.competition_id},[(0,l._)("td",In,(0,T.zw)(a.competition_id),1),(0,l._)("td",An,(0,T.zw)(a.competition_title),1),(0,l._)("td",Tn,[(0,l.Uk)((0,T.zw)(a.player_count)+"人 ",1),(0,l._)("span",Sn,"("+(0,T.zw)(a.billing_player_yen.toLocaleString())+"円)",1)]),(0,l._)("td",Un,[(0,l.Uk)((0,T.zw)(a.visitor_count)+"人 ",1),(0,l._)("span",On,"("+(0,T.zw)(a.billing_visitor_yen.toLocaleString())+"円)",1)]),(0,l._)("td",Mn,(0,T.zw)(a.billing_yen.toLocaleString())+"円",1)])))),128))])])])}var Pn=(0,l.aZ)({setup(){const a=(0,q.iH)([]),t=async()=>{const t=await N().get("/api/organizer/billing");console.log(t),a.value=t.data.data.reports};(0,l.bv)((()=>{t()}));const n=(0,l.Fl)((()=>a.value.reduce(((a,t)=>a+t.billing_yen),0)));return{totalBilling:n,billingReports:a}}});const Rn=(0,y.Z)(Pn,[["render",xn],["__scopeId","data-v-a7792cde"]]);var Bn=Rn;const Nn=[{path:"/",name:"lp",component:Ga},{path:"/mypage",name:"mypage",component:dt},{path:"/competition/:competition_id",name:"competition",component:It},{path:"/player/:player_id",name:"player",component:Pt},{path:"/organizer",name:"organizer",component:Yt},{path:"/organizer/players",name:"players",component:on},{path:"/organizer/competitions",name:"competitions",component:vn},{path:"/organizer/billing",name:"billing",component:Bn},{path:"/:catchall(.*)",name:"notfound",redirect:"/"}],jn=(0,R.p7)({history:(0,R.PO)("/"),routes:Nn});var Fn=jn;const Wn=location.hostname;"admin"===Wn.split(".")[0]?(0,e.ri)(z).use(Na).mount("#app"):(0,e.ri)(J).use(Fn).mount("#app")}},t={};function n(e){var l=t[e];if(void 0!==l)return l.exports;var i=t[e]={exports:{}};return a[e](i,i.exports,n),i.exports}n.m=a,function(){var a=[];n.O=function(t,e,l,i){if(!e){var o=1/0;for(c=0;c<a.length;c++){e=a[c][0],l=a[c][1],i=a[c][2];for(var s=!0,r=0;r<e.length;r++)(!1&i||o>=i)&&Object.keys(n.O).every((function(a){return n.O[a](e[r])}))?e.splice(r--,1):(s=!1,i<o&&(o=i));if(s){a.splice(c--,1);var d=l();void 0!==d&&(t=d)}}return t}i=i||0;for(var c=a.length;c>0&&a[c-1][2]>i;c--)a[c]=a[c-1];a[c]=[e,l,i]}}(),function(){n.n=function(a){var t=a&&a.__esModule?function(){return a["default"]}:function(){return a};return n.d(t,{a:t}),t}}(),function(){n.d=function(a,t){for(var e in t)n.o(t,e)&&!n.o(a,e)&&Object.defineProperty(a,e,{enumerable:!0,get:t[e]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(a){if("object"===typeof window)return window}}()}(),function(){n.o=function(a,t){return Object.prototype.hasOwnProperty.call(a,t)}}(),function(){var a={143:0};n.O.j=function(t){return 0===a[t]};var t=function(t,e){var l,i,o=e[0],s=e[1],r=e[2],d=0;if(o.some((function(t){return 0!==a[t]}))){for(l in s)n.o(s,l)&&(n.m[l]=s[l]);if(r)var c=r(n)}for(t&&t(e);d<o.length;d++)i=o[d],n.o(a,i)&&a[i]&&a[i][0](),a[i]=0;return n.O(c)},e=self["webpackChunkisuports"]=self["webpackChunkisuports"]||[];e.forEach(t.bind(null,0)),e.push=t.bind(null,e.push.bind(e))}();var e=n.O(void 0,[998],(function(){return n(3190)}));e=n.O(e)})();
//# sourceMappingURL=app.4da6e82d.js.map